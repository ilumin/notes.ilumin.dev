---
title: React Context
emoji: ü§´
created: 2021-02-24T09:59:08.453Z
modified: 2021-02-24T09:59:08.453Z
tags:
  - react
  - context
  - hook
---

## Problems

‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡πÉ‡∏´‡πâ child component ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
‡∏°‡∏±‡∏Å‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å‡πÜ‡∏Ñ‡∏∑‡∏≠

- props drillings
  ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏°‡∏µ component ‡∏´‡∏•‡∏≤‡∏¢‡πÜ‡∏ä‡∏±‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡πÅ‡∏Ñ‡πà‡∏ä‡∏±‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
  ‡∏™‡πà‡∏ß‡∏ô‡∏ä‡∏±‡πâ‡∏ô‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏Ñ‡πà‡∏£‡∏±‡∏ö props ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏∞‡∏™‡πà‡∏á props ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ
  ‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏¢‡∏≤‡∏Å ‡πÅ‡∏•‡∏∞ tight ‡πÄ‡∏Å‡∏¥‡∏ô
- too many props
  ‡∏°‡∏µ props ‡πÄ‡∏¢‡∏≠‡∏∞‡πÄ‡∏Å‡∏¥‡πä‡∏ô ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏¢‡∏≤‡∏Å

## Pros / Cons

‡∏Ç‡πâ‡∏≠‡∏î‡∏µ

- ‡∏°‡∏±‡∏ô‡∏•‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô props ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏±‡∏î‡πÄ‡∏Ç‡πâ‡∏≤ component
- ‡∏°‡∏±‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏á‡πà‡∏≤‡∏¢‡∏Å‡∏ß‡πà‡∏≤ redux

‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢

- ‡∏°‡∏±‡∏ô tight couple
  ‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏û‡∏ß‡∏Å component ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô context ‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ context provider

‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢ ‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏ß‡πà‡∏≤ component ‡∏ï‡πà‡∏≤‡∏á‡πÜ‡∏°‡∏±‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£ ‡∏ñ‡πâ‡∏≤‡∏°‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ context ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏•‡∏≥‡∏¢‡∏≤‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ maintain ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÉ‡∏ä‡πâ solution ‡∏≠‡∏∑‡πà‡∏ô‡∏°‡∏≤‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

## Use Cases

- theme
- ...

## Basic Usage

‡∏°‡∏±‡∏ô‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏ô‡∏∞ (‡∏à‡∏£‡∏¥‡∏á‡πÜ‡πÄ‡∏£‡∏≤‡∏£‡∏π‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏à‡∏≥‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡πÄ‡∏•‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏î‡∏™‡∏±‡∏Å‡∏´‡∏ô‡πà‡∏≠‡∏¢)

```jsx
import { createContext, useContext } from "react";

const themes = {
  jedi: {
    color: "#000",
    background: "#fff",
  },
  sith: {
    color: "#fff",
    background: "#000",
  },
};

const ThemeContext = createContext(themes.jedi);
const ThemeProvider = ThemeContext.Provider;
const useTheme = () => useContext(ThemeContext);

export { ThemeProvider, useTheme };

const App = () => {
  const theme = useTheme();
  return (
    <div style={{ background: theme.background }}>
      <h1 style={{ color: theme.color }}>Anakin SkyWalker</h1>
    </div>
  );
};

render(
  <ThemeProvider value={themes.jedi}>
    <App />
  </ThemeProvider>
);
```

‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤ `App` ‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö `ThemeProvider` ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏¢‡∏Å‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å
‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ñ‡πâ‡∏≤‡πÅ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô ‡πÄ‡∏≠‡∏≤ `App` ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ `ThemeProvider` ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ `userTheme` ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ (‡∏ô‡πà‡∏≤‡∏à‡∏∞ throw exception ‡∏°‡∏±‡πä‡∏á)

‡πÅ‡∏•‡∏∞‡∏ñ‡πâ‡∏≤‡∏•‡∏≠‡∏á‡∏ô‡∏∂‡∏Å‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡πÑ‡∏Å‡∏•‡πÜ ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥ method ‡∏ï‡πà‡∏≤‡∏á‡πÜ‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ toggle theme ‡∏ó‡∏µ‡πà context ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥ custom hook ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÜ

## Advance Usage

[KCD](https://kentcdodds.com/blog/how-to-use-react-context-effectively) ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ multiple context ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö dispatch ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ app ‡∏°‡∏µ effectively (‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£ maintain ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡πà‡∏≤‡∏ß‡∏ô‡∏∞) ‡πÇ‡∏î‡∏¢ multiple context ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏¢‡∏Å‡πÄ‡∏õ‡πá‡∏ô context ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö data ‡∏Å‡∏±‡∏ö context ‡∏ó‡∏µ‡πà‡∏ó‡∏≥ dispatch

```js
// src/count-context.js
import { createContext, useContext, useReducer } from "react";

const CountStateContext = createContext();
const CountDispatchContext = createContext();

function countReducer(state, action) {
  switch (action.type) {
    case "increment":
      return { count: state.count + 1 };
    case "decrement":
      return { count: state.count - 1 };
    default:
      throw new Error(`Unhandled action type: ${action.type}`);
  }
}

function CountProvider({ children }) {
  const [state, dispatch] = useReducer(countReducer, { count: 0 });
  return (
    <CountStateContext.Provider value={state}>
      <CountDispatchContext.Provider value={dispatch}>
        {children}
      </CountDispatchContext.Provider>
    </CountStateContext.Provider>
  );
}

function useCountState() {
  const context = useContext(CountStateContext);
  if (context === undefined)
    throw new Error(`useCountState must used within CountProvider`);

  return context;
}

function useCountDispatch() {
  const context = useContext(CountDispatchContext);
  if (context === undefined)
    throw new Error(`useCountDispatch must used within CountProvider`);

  return context;
}

export { CountProvider, useCountState, useCountDispatch };
```

‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å‡πÜ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏Ç‡∏≠‡∏á context ‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏µ‡πÅ‡∏Ñ‡πà `CountProvider`, `useCountState`, `useCountDispatch` ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ

‡∏ã‡∏∂‡πà‡∏á‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥‡∏à‡∏∞‡πÄ‡∏≠‡∏≤‡∏û‡∏ß‡∏Å mutation ‡∏´‡∏£‡∏∑‡∏≠ reducer ‡πÑ‡∏õ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô context value ‡πÄ‡∏•‡∏¢‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏ô‡∏≠‡∏∞ ‡πÅ‡∏•‡∏∞‡∏°‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡∏û‡∏ß‡∏Å data

## Captures

- ‡∏™‡∏£‡πâ‡∏≤‡∏á React Context ‡∏î‡πâ‡∏ß‡∏¢ `createContext`
  - ‡∏à‡∏∞‡πÑ‡∏î‡πâ `context.Provider` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô provider component
  - ‡πÑ‡∏î‡πâ `context.Consumer` (‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÉ‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô ‡πÉ‡∏ä‡πâ `userContext` ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡∏Å‡∏ß‡πà‡∏≤) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô context ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
  - ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ `userContext()` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á context ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ
